<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="description" content="–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ª–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π —Å –æ—Ñ—Ñ–ª–∞–π–Ω –¥–æ—Å—Ç—É–ø–æ–º. –ü–æ–∏—Å–∫ –ø–æ —Ä–∞—Å—Ç–µ–Ω–∏—è–º –∏ –±–æ–ª–µ–∑–Ω—è–º, —Ä–µ—Ü–µ–ø—Ç—ã –∏ –¥–æ–∑–∏—Ä–æ–≤–∫–∏.">
    <meta name="keywords" content="—Ç—Ä–∞–≤–Ω–∏–∫, –ª–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è, –Ω–∞—Ä–æ–¥–Ω–∞—è –º–µ–¥–∏—Ü–∏–Ω–∞, —Ñ–∏—Ç–æ—Ç–µ—Ä–∞–ø–∏—è, —Ä–µ—Ü–µ–ø—Ç—ã">
    <meta name="theme-color" content="#2d5016">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–¢—Ä–∞–≤–Ω–∏–∫">
    
    <title>–¢—Ä–∞–≤–Ω–∏–∫ - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ª–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π</title>
    
    <!-- PWA manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Phosphor Icons CDN -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Skip to content link for accessibility -->
    <a href="#appMain" class="skip-link">–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É</a>
    
    <!-- Header -->
    <header class="app-header" role="banner">
        <div class="header-content">
            <span class="app-icon" role="img" aria-label="–õ–∏—Å—Ç —Ä–∞—Å—Ç–µ–Ω–∏—è">üåø</span>
            <h1>–¢—Ä–∞–≤–Ω–∏–∫</h1>
        </div>
    </header>

    <!-- Main content area -->
    <main class="app-main" id="appMain" role="main" tabindex="-1">
        <div class="loading">
            <div class="loading-spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...</p>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav" role="navigation" aria-label="–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
        <button class="nav-item active" data-tab="plants" aria-label="–ü–æ–∏—Å–∫ –ø–æ —Ä–∞—Å—Ç–µ–Ω–∏—è–º">
            <span class="nav-icon" role="img" aria-hidden="true">üå±</span>
            <span class="nav-label">–†–∞—Å—Ç–µ–Ω–∏—è</span>
        </button>
        <button class="nav-item" data-tab="diseases" aria-label="–ü–æ–∏—Å–∫ –ø–æ –±–æ–ª–µ–∑–Ω—è–º">
            <span class="nav-icon" role="img" aria-hidden="true">üíä</span>
            <span class="nav-label">–ë–æ–ª–µ–∑–Ω–∏</span>
        </button>
        <button class="nav-item" data-tab="favorites" aria-label="–ò–∑–±—Ä–∞–Ω–Ω–æ–µ">
            <span class="nav-icon" role="img" aria-hidden="true">‚≠ê</span>
            <span class="nav-label">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
        </button>
    </nav>

    <!-- Install prompt -->
    <div class="install-banner" id="installBanner" style="display: none;" role="alert">
        <p>üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞</p>
        <button id="installButton" aria-label="–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        <button id="dismissInstall" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
    </div>

    <!-- Scripts -->
    <script src="db.js"></script>
    <script src="app.js"></script>
    
    <!-- Register Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:', registration.scope);
                        
                        // Check for updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // New version available
                                    if (confirm('–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–±–Ω–æ–≤–∏—Ç—å?')) {
                                        window.location.reload();
                                    }
                                }
                            });
                        });
                    })
                    .catch(error => {
                        console.error('‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', error);
                    });
            });
        }
    </script>
</body>
</html>
